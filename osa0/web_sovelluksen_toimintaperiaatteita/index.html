<!DOCTYPE html><html lang="en"><head><meta charSet="utf-8"/><meta http-equiv="x-ua-compatible" content="ie=edge"/><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"/><style data-href="/0.f95f8774b255c0263a67.css">@import url(https://fonts.googleapis.com/css?family=IBM+Plex+Mono:400,500,600);@import url(https://fonts.googleapis.com/css?family=IBM+Plex+Sans:400);.element--flex{display:flex;flex-wrap:wrap}.element--space-around{justify-content:space-around}.element--space-between{justify-content:space-between}.element--column{flex-direction:column}.element--centered{align-items:center;justify-content:center!important}@media (min-width:992px){.element--centered-in-desktop{align-items:center;justify-content:center!important}}@media (min-width:992px){.element--horizontal-half{width:45%}}.element--auto-margin{margin:auto}.element--auto-bottom-margin{margin-bottom:auto}.element--flex-start{align-content:flex-start}.element--no-wrap{flex-wrap:nowrap}.element--relative{position:relative!important}.image__content{position:absolute;top:0;left:0;height:100%;width:100%;-o-object-fit:cover;object-fit:cover}.image--contain .image__content{-o-object-fit:contain;object-fit:contain}.image{overflow:hidden;width:100%;position:relative}@media (min-width:992px){.image{width:40%}}.image .image__container{height:0;position:relative;width:100%;padding-bottom:89.0625%}.image--circle{border-radius:50%}.image--circle .image__content{background-color:#e1e1e1}.image--square-big{width:100%}.image--square-big .image__container{width:100%;padding-bottom:100%}.image--extra-small{width:8%}.image--extra-small .image__container{width:100%;padding-bottom:100%}@media (max-width:639px){.image--extra-small{width:calc(33.33333% - 1rem)}}.image--small{width:15%}.image--small .image__container{width:100%;padding-bottom:100%}@media (max-width:639px){.image--small{width:calc(33.33333% - 1rem)}}.image--medium{width:50%}.image--medium .image__container{width:100%;padding-bottom:71.25%}.image--large{width:100%}@media (min-width:992px){.image--large{width:60%}}.image--large .image__container{padding-bottom:59.37%;width:100%}.image--full-width{width:100%}.image--full-width .image__container{padding-bottom:59.37%;width:100%}.image--actual-size{width:100%}.image--actual-size .image__container{height:0;position:relative;width:100%;padding-bottom:60%}.navigation{z-index:2;list-style:none;opacity:0;display:none;margin:0;padding:5%;flex-direction:column;justify-content:center;align-items:center;background:#e1e1e1;position:fixed;top:8%;right:5%;transition:opacity .3s ease-in-out;font-weight:200}@media (min-width:992px){.navigation{display:flex;opacity:1;padding:0;font-weight:400;position:static;background:none;overflow:hidden;flex-direction:row}}.navigation__toggle{z-index:3;position:absolute;top:0;right:0;width:50px;height:40px;cursor:pointer;border:none;background:none;outline:none;border-radius:4px}@media (min-width:992px){.navigation__toggle{display:none}}.navigation__mobile-logo{display:none}.navigation__toggle-icon{top:8px;left:10px}.navigation__toggle-icon,.navigation__toggle-icon:after,.navigation__toggle-icon:before{position:absolute;width:30px;height:3px;transition:all .3s ease;border-radius:4px;background-color:#33332d}.navigation__toggle-icon:after,.navigation__toggle-icon:before{content:"";display:block}.navigation__toggle-icon:before{top:10px}.navigation__toggle-icon:after{top:20px}.is-open--navigation{overflow:hidden}.is-open--navigation .navigation{opacity:1;display:unset}.is-open--navigation .navigation:before{content:"";background-color:#e1e1e1;position:absolute;width:25px;height:25px;top:-3px;right:13px;-webkit-transform:rotate(45deg);transform:rotate(45deg)}.is-open--navigation .navigation__mobile-logo{display:block;width:30px;height:30px;position:absolute;top:47px;left:5%}@media (min-width:992px){.is-open--navigation .navigation__mobile-logo{display:none}}.is-open--navigation .navigation__toggle-icon{-webkit-transform:translate3d(0,10px,0) rotate(45deg);transform:translate3d(0,10px,0) rotate(45deg)}.is-open--navigation .navigation__toggle-icon,.is-open--navigation .navigation__toggle-icon:after,.is-open--navigation .navigation__toggle-icon:before{background:#33332d}.is-open--navigation .navigation__toggle-icon:before{-webkit-transform:rotate(-45deg) translate3d(-5.71429px,-6px,0);transform:rotate(-45deg) translate3d(-5.71429px,-6px,0);opacity:0}.is-open--navigation .navigation__toggle-icon:after{-webkit-transform:translate3d(0,-19px,0) rotate(-90deg);transform:translate3d(0,-19px,0) rotate(-90deg)}.navigation__item{margin:22px 0;white-space:nowrap}.navigation__item:first-of-type{margin:0 0 22px}.navigation__item:last-of-type{margin:22px 0 0}@media (min-width:992px){.navigation__item{margin:0 30px;padding:0!important}.navigation__item:first-of-type{margin:0 30px 0 2rem}.navigation__item:last-of-type{margin:0 0 0 30px}}html{font-family:IBM Plex Mono,monospace;-ms-text-size-adjust:100%;-webkit-text-size-adjust:100%}body{margin:0}article,aside,details,figcaption,figure,footer,header,main,menu,nav,section,summary{display:block}audio,canvas,progress,video{display:inline-block}audio:not([controls]){display:none;height:0}progress{vertical-align:baseline}[hidden],template{display:none}a{background-color:transparent;-webkit-text-decoration-skip:objects}a:active,a:hover{outline-width:0}abbr[title]{border-bottom:none;text-decoration:underline;-webkit-text-decoration:underline dotted;text-decoration:underline dotted}b,strong{font-weight:inherit;font-weight:bolder}dfn{font-style:italic}h1{font-size:2em;margin:.67em 0}mark{background-color:#ff0;color:#000}small{font-size:80%}sub,sup{font-size:75%;line-height:0;position:relative;vertical-align:baseline}sub{bottom:-.25em}sup{top:-.5em}img{border-style:none}svg:not(:root){overflow:hidden}code,kbd,pre,samp{font-family:IBM Plex Mono,monospace;font-size:1em}figure{margin:1em 40px}hr{box-sizing:content-box;height:0;overflow:visible}button,input,optgroup,select,textarea{font:inherit;margin:0}optgroup{font-weight:700}button,input{overflow:visible}button,select{text-transform:none}[type=reset],[type=submit],button,html [type=button]{-webkit-appearance:button}[type=button]::-moz-focus-inner,[type=reset]::-moz-focus-inner,[type=submit]::-moz-focus-inner,button::-moz-focus-inner{border-style:none;padding:0}[type=button]:-moz-focusring,[type=reset]:-moz-focusring,[type=submit]:-moz-focusring,button:-moz-focusring{outline:1px dotted ButtonText}fieldset{border:1px solid silver;margin:0 2px;padding:.35em .625em .75em}legend{box-sizing:border-box;color:inherit;display:table;max-width:100%;padding:0;white-space:normal}textarea{overflow:auto}[type=checkbox],[type=radio]{box-sizing:border-box;padding:0}[type=number]::-webkit-inner-spin-button,[type=number]::-webkit-outer-spin-button{height:auto}[type=search]{-webkit-appearance:textfield;outline-offset:-2px}[type=search]::-webkit-search-cancel-button,[type=search]::-webkit-search-decoration{-webkit-appearance:none}::-webkit-input-placeholder{color:inherit;opacity:.54}::-webkit-file-upload-button{-webkit-appearance:button;font:inherit}html{font:112.5%/1.45em IBM Plex Mono,monospace;box-sizing:border-box;overflow-y:scroll}*,:after,:before{box-sizing:inherit}body{color:rgba(0,0,0,.8);font-family:IBM Plex Mono,monospace;font-weight:400;word-wrap:break-word;-webkit-font-kerning:normal;font-kerning:normal;-ms-font-feature-settings:"kern","liga","clig","calt";-webkit-font-feature-settings:"kern","liga","clig","calt";font-feature-settings:"kern","liga","clig","calt"}img{max-width:100%;padding:0;margin:0 0 1.45rem}h1{font-size:2.25rem}h1,h2{padding:0;margin:0 0 1.45rem;color:inherit;font-family:IBM Plex Mono,monospace;font-weight:700;text-rendering:optimizeLegibility;line-height:1.1}h2{font-size:1.62671rem}h3{margin:2rem 0 -.5rem;font-size:1.38316rem}h3,h4{padding:0;color:inherit;font-family:IBM Plex Mono,monospace;font-weight:700;text-rendering:optimizeLegibility;line-height:1.1}h4{margin:2rem 0 -1rem;font-size:1rem}h5{font-size:.85028rem}h5,h6{padding:0;margin:0 0 1.45rem;color:inherit;font-family:IBM Plex Mono,monospace;font-weight:700;text-rendering:optimizeLegibility;line-height:1.1}h6{font-size:.78405rem}hgroup{padding:0;margin:0 0 1.45rem}ol,ul{padding:0;margin:0 0 1.45rem 1.45rem;list-style-position:outside;list-style-image:none}dd,dl,figure,p{padding:0;margin:0 0 1.45rem}pre{margin:0 0 1.45rem;font-size:.85rem;line-height:1.42;background:rgba(0,0,0,.04);border-radius:3px;overflow:auto;word-wrap:normal;padding:1.45rem}table{font-size:1rem;line-height:1.45rem;border-collapse:collapse;width:100%}fieldset,table{padding:0;margin:0 0 1.45rem}blockquote{padding:0;margin:0 1.45rem 1.45rem}form,iframe,noscript{padding:0;margin:0 0 1.45rem}hr{padding:0;margin:0 0 calc(1.45rem - 1px);background:rgba(0,0,0,.2);border:none;height:1px}address{padding:0;margin:0 0 1.45rem}b,dt,strong,th{font-weight:700}li{margin-bottom:.725rem}ol li,ul li{padding-left:0}li>ol,li>ul{margin-left:1.45rem;margin-bottom:.725rem;margin-top:.725rem}blockquote :last-child,li :last-child,p :last-child{margin-bottom:0}li>p{margin-bottom:.725rem}code,kbd,samp{font-size:.85rem;line-height:1.45rem}abbr,abbr[title],acronym{border-bottom:1px dotted rgba(0,0,0,.5);cursor:help}abbr[title]{text-decoration:none}td,th,thead{text-align:left}td,th{border-bottom:1px solid rgba(0,0,0,.12);font-feature-settings:"tnum";-moz-font-feature-settings:"tnum";-ms-font-feature-settings:"tnum";-webkit-font-feature-settings:"tnum";padding:.725rem .96667rem calc(.725rem - 1px)}td:first-child,th:first-child{padding-left:0}td:last-child,th:last-child{padding-right:0}code,tt{background-color:rgba(0,0,0,.04);border-radius:3px;font-family:SFMono-Regular,Consolas,Roboto Mono,Droid Sans Mono,Liberation Mono,Menlo,Courier,monospace;padding:.2em 0}pre code{background:none;line-height:1.42}code:after,code:before,tt:after,tt:before{letter-spacing:-.2em;content:" "}pre code:after,pre code:before,pre tt:after,pre tt:before{content:""}@media only screen and (max-width:480px){html{font-size:100%}}body,html{margin:0;padding:0;font-family:IBM Plex Mono,monospace;font-weight:500;color:#33332d;font-size:14px;line-height:1.555rem}@media (min-width:992px){body,html{font-size:18px}}body{padding-top:80px}@media (min-width:992px){body{padding-top:2.055rem}}.offset:target{display:block;position:relative;top:-80px;visibility:hidden}@media (min-width:992px){.offset:target{top:-2.055rem}}p{margin:0;text-align:left;line-height:1.5em}a,p{color:#33332d}a{text-decoration:none}.link a{border-bottom:2px solid #e1e1e1}.container{position:relative;margin:0 auto;display:flex;flex-wrap:wrap;justify-content:space-between;width:90%;max-width:1200px}@media (min-width:992px){.container--right{margin-right:5%;width:54%;max-width:719.9856px}}@media (min-width:992px) and (min-width:1200px){.container--right{margin-right:calc((100% - 1200px)/2)}}.hidden{display:none!important}.centered{text-align:center}@media (max-width:639px){.centered--mobile{justify-content:center;align-content:center;align-items:center}}.spacing{margin-top:2rem}@media (min-width:992px){.spacing{margin-top:5rem}}.spacing--small{margin-top:1rem}@media (min-width:992px){.spacing--small{margin-top:3.444rem}}.spacing--large{margin-top:4rem}@media (min-width:992px){.spacing--large{margin-top:10rem}}.spacing--extra-large{margin-top:4rem}@media (min-width:992px){.spacing--extra-large{margin-top:20rem}}.spacing--after{margin-bottom:2rem}@media (min-width:992px){.spacing--after{margin-bottom:5rem}}@media (min-width:992px){.spacing--after-small{margin-bottom:2.5rem}}.spacing--after-large{margin-bottom:4rem}@media (min-width:992px){.spacing--after-large{margin-bottom:10rem}}@media (max-width:991px){.spacing--mobile{margin-top:2rem}}.col-1{width:100%}@media (min-width:992px){.col-1{width:10%}}.col-2{width:100%}@media (min-width:992px){.col-2{width:20%}}.col-3{width:100%}@media (min-width:992px){.col-3{width:30%}}.col-4{width:100%}@media (min-width:992px){.col-4{width:40%}}.col-5{width:100%}@media (min-width:992px){.col-5{width:50%}}.col-6{width:100%}@media (min-width:992px){.col-6{width:60%}}.col-7{width:100%}@media (min-width:992px){.col-7{width:70%}}.col-8{width:100%}@media (min-width:992px){.col-8{width:80%}}.col-9{width:100%}@media (min-width:992px){.col-9{width:90%}}.col-10{width:100%}@media (min-width:992px){.col-10{width:100%}}@media (min-width:992px){.push-right-1{margin-left:10%}.push-right-2{margin-left:20%}.push-right-3{margin-left:30%}.push-right-4{margin-left:40%}.push-right-5{margin-left:50%}.push-left-1{margin-right:10%}.push-left-2{margin-right:20%}.push-left-3{margin-right:30%}.push-left-4{margin-right:40%}.push-left-5{margin-right:50%}.push-left{margin-right:auto}.push-right{margin-left:auto}}@media (max-width:991px){.col-1--mobile{width:10%}.col-2--mobile{width:20%}.col-3--mobile{width:30%}.col-4--mobile{width:40%}.col-5--mobile{width:50%}.col-6--mobile{width:60%}.col-7--mobile{width:70%}.col-8--mobile{width:80%}.col-9--mobile{width:90%}.col-10--mobile{width:100%}.order-0--mobile{order:0}.order-1--mobile{order:1}.order-2--mobile{order:2}.order-3--mobile{order:3}.order-4--mobile{order:4}.order-5--mobile{order:5}.hidden--mobile{display:none}}.centered-vertically{display:flex;flex-direction:column;justify-content:center}.nav-item-hover{text-decoration:none;color:#33332d;font-weight:500;padding:.2em}@media (min-width:640px){.nav-item-hover{font-weight:600;font-size:1.111rem}}.nav-item-hover:active,.nav-item-hover:focus,.nav-item-hover:hover{color:#fff;background-color:#33332d}.nav-item-hover:active,.nav-item-hover:focus{outline:2px solid #706be4}.flex-fix-aligning:after,.flex-fix-aligning:before{content:"";width:30%;order:2}.index__main-title{font-size:1.571rem}@media (min-width:992px){.index__main-title{font-size:3rem}}.auto-bottom-margin{margin-bottom:auto}@media (min-width:992px){.absolute-top-right--desktop{position:absolute;top:0;right:0}}@media (min-width:640px){.frontpage__hero .image{top:-2em}}@media (min-width:992px){.frontpage__hero{flex-direction:column}.frontpage__hero .image{top:4em}}.header{position:fixed;z-index:200;top:0;transition:top .2s ease-in-out;box-sizing:border-box;width:100%;padding-top:1.444rem;padding-bottom:1rem;transition:all .2s ease-in-out}.header__logo{margin:0 10px}.triple-border{position:relative;padding:2px;border-radius:5px 0;transition:color .1s ease-in-out,background-color .1s ease-in-out}.triple-border:after,.triple-border:before{content:"";border:2px solid #33332d;border-radius:5px;position:absolute;width:calc(100% + 5px);height:calc(100% + 5px)}.triple-border:before{left:0;top:0}.triple-border:after{bottom:0;right:0}.triple-border__container{overflow:hidden;border-radius:3px 0}.triple-border--large-margin{margin:13px;padding:3px}.triple-border--large-margin:after,.triple-border--large-margin:before{content:"";border-width:3px;border-radius:13px;width:calc(100% + 13px);height:calc(100% + 13px)}.triple-border--large-margin .triple-border__container{border-radius:10px 0}.triple-border__logo{padding:.2rem;font-size:1.111rem;font-weight:600}.triple-border__return-tasks{font-size:.9rem;padding:1rem .2rem}</style><style data-href="/app.f588656cc80a065e5f1e.css">code[class*=language-],pre[class*=language-]{color:#fff;background:none;text-shadow:0 -.1em .2em #000;font-family:Consolas,Monaco,Andale Mono,Ubuntu Mono,monospace;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;word-wrap:normal;line-height:1.5;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-ms-hyphens:none;hyphens:none}@media print{code[class*=language-],pre[class*=language-]{text-shadow:none}}:not(pre)>code[class*=language-],pre[class*=language-]{background:#4d4033}pre[class*=language-]{padding:1em;margin:.5em 0;overflow:auto;border:.3em solid #7a6652;border-radius:.5em;box-shadow:inset 1px 1px .5em #000}:not(pre)>code[class*=language-]{padding:.15em .2em .05em;border-radius:.3em;border:.13em solid #7a6652;box-shadow:inset 1px 1px .3em -.1em #000;white-space:normal}.token.cdata,.token.comment,.token.doctype,.token.prolog{color:#998066}.namespace,.token.punctuation{opacity:.7}.token.boolean,.token.constant,.token.number,.token.property,.token.symbol,.token.tag{color:#d1949e}.token.attr-name,.token.builtin,.token.char,.token.inserted,.token.selector,.token.string{color:#bde052}.language-css .token.string,.style .token.string,.token.entity,.token.operator,.token.url,.token.variable{color:#f5b83d}.token.atrule,.token.attr-value,.token.keyword{color:#d1949e}.token.important,.token.regex{color:#e90}.token.bold,.token.important{font-weight:700}.token.italic{font-style:italic}.token.entity{cursor:help}.token.deleted{color:red}</style><style data-href="/component---src-templates-content-template-js.e0ea38572bef1d3250bd.css">@import url(https://fonts.googleapis.com/css?family=IBM+Plex+Mono:400,500,600);@import url(https://fonts.googleapis.com/css?family=IBM+Plex+Sans:400);.course{position:relative;width:100%}.course p{font-family:IBM Plex Sans,monospace}@media (min-width:640px){.course p{margin-left:1rem}}.course p:not(:last-of-type){margin-bottom:1rem}@media (min-width:640px){.course h1{margin-left:3rem}}.course h2,.course h3,.course h4{padding-bottom:2rem}@media (min-width:640px){.course h2,.course h3,.course h4,.course table{margin-left:1rem}}.course ul{font-family:IBM Plex Sans,monospace}@media (min-width:640px){.course ul{margin-left:2.2rem}}.course h2:not(:first-of-type){margin-top:2rem}.course pre{margin:2rem 0;background-color:#33332d;color:#fff}.course em{font-family:Courier;font-style:normal;background-color:hsla(0,0%,88.2%,.6);padding:1px 5px 2px}.course img{border:11px solid transparent}.course .banner,.course .container{position:static}.course .letter{width:4rem;height:4rem;border-width:5px;border-style:solid;border-radius:2.5rem;text-align:center;margin:1rem;line-height:1.3em;-webkit-transform:translate(-1rem);transform:translate(-1rem)}@media (min-width:640px){.course .letter{-webkit-transform:translate(-3rem,4.5rem);transform:translate(-3rem,4.5rem)}}.course .letter,.course h1{font-size:2.3rem;font-weight:700}.course-content a,.tasks a{border:0;border-bottom-width:2px;border-style:solid;padding:2px}.course-content{max-width:100%}.tasks a{border-color:#33332d!important}.gatsby-highlight-code-line{background-color:hsla(0,0%,88.2%,.3);display:block;margin-right:-1em;margin-left:-1em;padding-right:1em;padding-left:.75em}code[class*=language-],pre[class*=language-]{text-shadow:none}.arrow-go-up{width:36px;height:36px;position:fixed;bottom:5%;right:5%;z-index:99999;cursor:pointer}@media (max-width:639px){.arrow-go-up{right:10%}}.arrow__container{position:relative}.arrow__container:not():first-child{background:none;background-color:none}@media (min-width:640px){.arrow__container:not():first-child{border-left:none}.arrow__container:not():first-child:before{content:"";background:url(data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCA0NzcuMTc1IDQ3Ny4xNzUiPjxwYXRoIGQ9Ik0zNjAuNzMxIDIyOS4wNzVsLTIyNS4xLTIyNS4xYy01LjMtNS4zLTEzLjgtNS4zLTE5LjEgMHMtNS4zIDEzLjggMCAxOS4xbDIxNS41IDIxNS41LTIxNS41IDIxNS41Yy01LjMgNS4zLTUuMyAxMy44IDAgMTkuMSAyLjYgMi42IDYuMSA0IDkuNSA0IDMuNCAwIDYuOS0xLjMgOS41LTRsMjI1LjEtMjI1LjFjNS4zLTUuMiA1LjMtMTMuOC4xLTE5eiIvPjwvc3ZnPg==) no-repeat;background-size:contain;position:absolute;top:0;left:0;height:100%;width:100%}}.arrows--horizontal{display:flex;position:relative;margin:0;align-items:flex-start}.arrow__wrapper{display:flex;justify-content:flex-start;align-items:center;margin:0}.arrow__wrapper:first-of-type{border-right:none;z-index:20}.arrow__wrapper:nth-of-type(n+2){margin-left:-4rem;z-index:10}.arrow__wrapper:nth-of-type(n+2) .arrow__rectangle{border-left:none;padding-left:4rem}.arrow__wrapper:nth-of-type(3){z-index:5}.arrow__rectangle{padding:1rem;justify-content:center;align-items:center;border:2px solid #33332d;border-right:none;z-index:2;overflow:hidden;font-family:IBM Plex Sans,monospace;position:relative}@media (max-width:991px){.arrow__rectangle{font-size:.7rem}}.arrow__rectangle .bold{font-weight:600}.arrow__rectangle--thick-border{border:3px solid #33332d;border-right:none}.arrow__point{padding:1.25rem;border:2px solid #33332d;border-bottom:none;border-left:none;-webkit-transform:translate(-1.3rem) rotate(45deg);transform:translate(-1.3rem) rotate(45deg);z-index:1;overflow:hidden}.arrow__point--thick-border{border:3px solid #33332d;border-bottom:none;border-left:none}.arrow__wrapper--stacked{display:flex;justify-content:flex-start;align-items:center;margin:auto auto auto 0}.arrow__wrapper--stacked:nth-of-type(n+2){margin-top:1rem}@media (min-width:640px){.arrow__wrapper--stacked:nth-of-type(n+2){margin-top:-2px}}.arrow__wrapper--stacked .arrow__rectangle{position:relative}@media (min-width:640px){.arrow__wrapper--stacked .arrow__rectangle{padding:1.25rem}}@media (min-width:992px){.arrow__wrapper--stacked .arrow__rectangle{padding:1rem}}.arrow__wrapper--stacked .arrow__point{padding:1.08rem;margin-left:2px}@media (min-width:640px){.arrow__wrapper--stacked .arrow__point{margin-left:unset;padding:1.25rem}}.arrow__wrapper--stacked:hover .arrow__point,.arrow__wrapper--stacked:hover .arrow__rectangle{background-color:#33332d!important}.arrow__wrapper--stacked:hover .arrow--stacked-letter,.arrow__wrapper--stacked:hover .arrow--stacked-title{color:#fff}.arrow--stacked-letter{margin-right:2rem}.arrow--stacked-title{white-space:nowrap;font-family:IBM Plex Mono,monospace}.arrow__container--with-link{width:100%!important}@media (max-width:639px){.breadcrumb .arrow__wrapper{padding:0}.breadcrumb .arrow__wrapper:not(:last-of-type):after{content:">";font-size:.7rem;font-weight:400;margin:0 .5rem}}.breadcrumb .arrow__rectangle{position:relative}@media (max-width:639px){.breadcrumb .arrow__rectangle{border:none;padding:0;font-size:.7rem;white-space:nowrap;background-color:transparent!important;color:#33332d}}@media (max-width:639px){.breadcrumb .arrow__point{display:none}}.banner{display:flex;width:100%;align-items:center;position:relative;padding:2rem 0;background-color:#e1e1e1}@media (min-width:992px){.banner{padding:3.444rem 3.444rem 4.444rem}}.edit-link{border-bottom-width:3px;border-bottom-style:solid}@media (min-width:992px){#footer{align-items:center}}#footer .footer__navigation-link{font-size:1rem;line-height:18px;white-space:nowrap;font-family:IBM Plex Sans,monospace;margin-left:0!important}#footer .footer__navigation-link:nth-of-type(n+2){margin-top:2.142rem}@media (min-width:992px){#footer .footer__navigation{flex-direction:row;flex-wrap:nowrap;justify-content:flex-end}#footer .footer__navigation-link{margin-top:0!important;margin-bottom:auto}#footer .footer__navigation-link:nth-of-type(n+1){margin-right:2.877rem}#footer .footer__navigation-link:last-of-type{margin-right:0!important}}.prev-next__container .separator{display:none}@media (max-width:639px){.prev-next__container .separator{display:block;background-color:#33332d;width:2px}}.prev-next__container .prev b,.prev-next__container .prev p{text-align:right}@media (max-width:639px){.prev-next__container .prev p:before{content:"<";margin-right:1rem}}@media (max-width:639px){.prev-next__container .next p:after{content:">";margin-left:1rem}}.body-text:not(:last-of-type){margin-bottom:2.5rem}.body-text__title{color:#33332d;font-size:1.44rem;line-height:1.25em;font-weight:700;margin:0;position:relative;top:50%;-webkit-transform:translateY(-50%);transform:translateY(-50%)}.body-text__content:not(:last-of-type){padding-bottom:2em}.bold{font-weight:700}.body-text--no-padding{padding:0!important}.scroll-navigation{font-size:16px;position:absolute;width:30%;left:0;top:198px;padding-right:1rem;z-index:199}@media (max-width:991px){.scroll-navigation{display:none}}.scroll-navigation li{list-style-type:none}.scroll-navigation li:hover{cursor:pointer}.scroll-navigation li:hover a{background-color:#33332d;color:#fff!important}.scroll-navigation li:before{content:"-"}.left-navigation-link{padding-left:1.2rem;text-indent:-1.2rem}.left-navigation-link:hover{background-color:#33332d!important;color:#fff!important}.level-h1{font-weight:700;padding-left:2.8rem;text-indent:-2.8rem}.level-h2{padding-left:1.6rem;text-indent:-1.6rem}.accordion__container{margin-bottom:1rem}.accordion__title{padding-left:2.149rem!important;padding-right:2.149rem!important;font-size:1.111rem!important;font-weight:600}.accordion{background-color:#fff;border:3px solid #33332d;border-radius:5px;color:#444;cursor:pointer;padding:1rem;width:100%;text-align:left;outline:none;font-size:15px;transition:max-width .4s}.accordion:hover,.active{background-color:#ccc}.accordion:after{content:"\2795";font-size:1rem;color:#33332d;float:right;margin-left:5px}.active{border-color:#fff}.active:after{content:"\2796"}.panel{background-color:#fff;transition:height .3s;transition-timing-function:ease-in-out;overflow:hidden}.accordion--side-navigation{width:100%;margin-left:unset}.accordion--side-navigation .accordion{border:none;padding:0!important;background-color:transparent!important;color:#33332d!important;border-radius:0}.accordion--side-navigation .accordion__title{font-size:16px!important;font-weight:unset;background-color:transparent}.accordion--side-navigation .accordion__title:hover{background-color:#33332d!important;color:#fff!important}.accordion--side-navigation .panel{padding:1rem 0 0!important;background-color:transparent}.accordion--side-navigation .panel ul{margin-left:1rem}.accordion--side-navigation .accordion:hover,.accordion--side-navigation .active{background-color:#33332d;color:#fff}.accordion--side-navigation .accordion:after,.accordion--side-navigation .active:after{content:""}.sub-header{color:#33332d;font-family:IBM Plex Mono,monospace;padding-bottom:1.357rem}@media (min-width:992px){.sub-header{padding-bottom:2.333rem}}</style><meta name="generator" content="Gatsby 2.0.53"/><title data-react-helmet="true">Fullstack osa0 |  | Fullstack 2019</title><meta data-react-helmet="true" name="description" content=""/><meta data-react-helmet="true" property="og:title" content="Fullstack osa0 | "/><meta data-react-helmet="true" property="og:description" content=""/><meta data-react-helmet="true" property="og:type" content="website"/><meta data-react-helmet="true" name="twitter:card" content="summary"/><meta data-react-helmet="true" name="twitter:creator" content="Houston Inc. Consulting oy"/><meta data-react-helmet="true" name="twitter:title" content="Fullstack osa0 | "/><meta data-react-helmet="true" name="twitter:description" content=""/><meta data-react-helmet="true" name="keywords" content="Fullstack, "/><link rel="shortcut icon" href="/icons/icon-48x48.png"/><link rel="manifest" href="/manifest.webmanifest"/><meta name="theme-color" content="#663399"/><link as="script" rel="preload" href="/app-99428090e5bd22eeeca0.js"/><link as="script" rel="preload" href="/1-456d0b929a90ce0c027e.js"/><link as="script" rel="preload" href="/component---src-templates-content-template-js-4cf3ce554b069f839267.js"/><link as="script" rel="preload" href="/2-e0028e5792f6cb5e6fe8.js"/><link as="script" rel="preload" href="/0-60547c03d4cc4251e376.js"/><link as="script" rel="preload" href="/3-7bca983c2bafa9f6e675.js"/><link as="script" rel="preload" href="/webpack-runtime-8c10bc8001a0e578ec33.js"/><link rel="preload" href="/static/d/889/path---osa-0-web-sovelluksen-toimintaperiaatteita-9-eb-c59-98XfHlVElevGIkLAE9aYFNlvAA.json" as="fetch" crossOrigin="use-credentials"/></head><body><div id="___gatsby"><div style="outline:none" tabindex="-1" role="group"><div class="header " style="background-color:white"><div class="container" style="align-items:center;justify-content:flex-start"><a class="header__logo" href="/"><div class="triple-border nav-item-hover " style="padding:0.2em"><div class="triple-border__container triple-border__logo" style="background-color:transparent">{() =&gt; fs}</div></div></a><div class="navigation__wrapper "><button aria-label="Navigation menu" aria-expanded="false" class="navigation__toggle"><div class="navigation__toggle-icon"></div></button><nav><ul class="navigation"><li class="navigation__item "><a class="nav-item-hover" href="/about">KURSSISTA</a></li><li class="navigation__item "><a class="nav-item-hover" href="/#course-contents">KURSSIN SISÄLTÖ</a></li><li class="navigation__item "><a class="nav-item-hover" href="/faq">FAQ</a></li></ul></nav></div></div></div><div class="course-container spacing--small spacing--after"><div class="banner " style="background-image:url(/static/part-0-ead92e4122923cfd78b71d8203d93388.svg);background-position:center left;background-size:80%;background-repeat:no-repeat;background-color:#B2BBF0"><div class="container spacing--after"><div class="col-10 spacing--after"><div class="arrow__container arrows--horizontal breadcrumb"><div class="arrow__wrapper"><div class="arrow__rectangle  " style="background-color:#B2BBF0;color:#33332d"><a href="/#course-contents">Fullstack</a></div><div class="arrow__point " style="background-color:#B2BBF0;color:#33332d"></div></div><div class="arrow__wrapper"><div class="arrow__rectangle  " style="background-color:#B2BBF0;color:#33332d"><a href="/osa0">osa 0</a></div><div class="arrow__point " style="background-color:#B2BBF0;color:#33332d"></div></div><div class="arrow__wrapper"><div class="arrow__rectangle  " style="background-color:#33332d;color:white">Web-sovelluksen toimintaperiaatteita</div><div class="arrow__point " style="background-color:#33332d;color:white"></div></div></div></div></div></div><div class="course "><div class="container element--flex element--relative"><div class="scroll-navigation col-2 spacing element--flex element--column" tag="ul"><a class="left-navigation-link" style="border-color:#B2BBF0" href="/osa0/yleista">a Yleistä</a><div class="accordion__container col-8 push-right-1 accordion--side-navigation"><button class="accordion accordion__title  " style="background-color:#B2BBF0;border-color:#B2BBF0">b Web-sovelluksen toimintaperiaatteita</button><div class="panel" style="padding:;max-height:0;transition:max-height 0.2s ease-out"><ul></ul></div></div></div><div class="course-content col-6 push-right-3 element--auto-bottom-margin"><p class="col-1 letter" style="border-color:#B2BBF0">b</p><h1 class="sub-header ">Web-sovelluksen toimintaperiaatteita</h1></div></div><div class="container"><div class="course-content col-6 push-right-3">
<p>Ennen kuin aloitamme ohjelmoinnin, käymme läpi web-sovellusten toimintaperiaatteita tarkastelemalla osoitteessa <a href="https://fullstack-exampleapp.herokuapp.com/" target="_blank" rel="nofollow noopener noreferrer">https://fullstack-exampleapp.herokuapp.com/</a> olevaa esimerkkisovellusta. Huom. sovelluksen toinen versio on osoitteessa <a href="https://fullstack-example.now.sh" target="_blank" rel="nofollow noopener noreferrer">https://fullstack-example.now.sh</a>, voit käyttää kumpaa vaan.</p>
<p>Sovelluksen olemassaolon tarkoitus on ainoastaan havainnollistaa kurssin peruskäsitteistöä. Sovellus ei ole missään tapauksessa esimerkki siitä, <i>miten</i> web-sovelluksia kannattaisi kehittää. Päinvastoin se demonstroi eräitä historiallisia web-sovellusten toteutukseen käytettyjä tapoja ja tekniikoita, joiden katsotaan nykyään olevan jopa <i>huonoja käytänteitä</i>.</p>
<p>Kurssin suosittelemaa tyyliä noudattavan koodin kirjoittaminen alkaa <a href="/osa1">osasta 1</a>.</p>
<p>Käytä nyt ja <i>koko ajan</i> tämän kurssin aikana Chrome-selainta.</p>
<p>Avataan selaimella <a href="https://fullstack-exampleapp.herokuapp.com/" target="_blank" rel="nofollow noopener noreferrer">esimerkkisovellus</a>. Sivun ensimmäinen lataus kestää joskus hetken.</p>
<p><strong>Web-sovelluskehityksen sääntö numero yksi</strong>: pidä selaimen developer-konsoli koko ajan auki. Konsoli avautuu macilla painamalla yhtä aikaa <em>alt</em> <em>cmd</em> ja <em>i</em>.</p>
<p>Ennen kun jatkat eteenpäin, selvitä miten saat koneellasi konsolin auki (googlaa tarvittaessa) ja muista pitää se auki <i>aina</i> kun teet web-sovelluksia.</p>
<p>Konsoli näyttää seuraavalta:</p>
<p><img src="../images/0/1.png"/></p>
<p>Varmista, että välilehti <i>Network</i> on avattuna ja aktivoi valinta <i>Disable cache</i> kuten kuvassa on tehty. Myös <i>Preserve logs</i> on joskus hyödyllinen, se säilyttää sovelluksen tulostamat logit sivujen uudelleenlatauksen yhteydessä.</p>
<p><strong>HUOM:</strong> konsolin tärkein välilehti on <i>Console</i>. Käytämme nyt johdanto-osassa kuitenkin ensin melko paljon välilehteä <i>Network</i>.</p>
<h3>HTTP GET</h3>
<p>Selain ja web-palvelin kommunikoivat keskenään <a href="https://developer.mozilla.org/fi/docs/Web/HTTP" target="_blank" rel="nofollow noopener noreferrer">HTTP</a>-protokollaa käyttäen. Avoinna oleva konsolin Network-tabi kertoo miten selain ja palvelin kommunikoivat.</p>
<p>Kun nyt reloadaat sivun (eli painat F5-näppäintä tai selaimessa olevaa symbolia ↺), kertoo konsoli, että tapahtuu kaksi asiaa</p>
<ul>
<li>selain hakee web-palvelimelta sivun <i>fullstack-exampleapp.herokuapp.com/</i> sisällön</li>
<li>ja lataa kuvan <i>kuva.png</i></li>
</ul>
<p><img src="../images/0/2.png"/></p>
<p>Jos ruutusi on pieni, saatat joutua suurentamaan konsoli-ikkunaa, jotta saat selaimen tekemät haut näkyviin.</p>
<p>Klikkaamalla näistä ensimmäistä, paljastuu tarkempaa tietoa siitä mistä on kyse:</p>
<p><img src="../images/0/3.png"/></p>
<p>Ylimmästä osasta <i>General</i> selviää, että selain teki <a href="https://developer.mozilla.org/en-US/docs/Web/HTTP/Methods/GET" target="_blank" rel="nofollow noopener noreferrer">GET</a>-metodilla pyynnön osoitteeseen <i><a href="https://fullstack-exampleapp.herokuapp.com/" target="_blank" rel="nofollow noopener noreferrer">https://fullstack-exampleapp.herokuapp.com/</a></i> ja että pyyntö oli onnistunut, sillä pyyntöön saatiin vastaus, jonka <a href="https://en.wikipedia.org/wiki/List_of_HTTP_status_codes" target="_blank" rel="nofollow noopener noreferrer">Status code</a> on 200.</p>
<p>Pyyntöön ja palvelimen lähettämään vastaukseen liittyy erinäinen määrä otsakkeita eli <a href="https://en.wikipedia.org/wiki/List_of_HTTP_header_fields" target="_blank" rel="nofollow noopener noreferrer">headereita</a>:</p>
<p><img src="../images/0/4.png"/></p>
<p>Ylempänä oleva <i>Response headers</i> kertoo mm. vastauksen koon tavuina ja vastaushetken. Tärkeä headeri <a href="https://developer.mozilla.org/en-US/docs/Web/HTTP/Headers/Content-Type" target="_blank" rel="nofollow noopener noreferrer">Content-Type</a> kertoo, että vastaus on <a href="https://en.wikipedia.org/wiki/UTF-8" target="_blank" rel="nofollow noopener noreferrer">utf-8</a>-muodossa oleva tekstitiedosto, jonka sisältö on muotoiltu HTML:llä. Näin selain tietää, että kyseessä on normaali <a href="https://en.wikipedia.org/wiki/HTML" target="_blank" rel="nofollow noopener noreferrer">HTML</a>-sivu, joka tulee renderöidä käyttäjän selaimeen &quot;websivun tavoin&quot;.</p>
<p>Välilehti <i>Response</i> näyttää, miltä pyyntöön vastauksena lähetetty data näyttää. Kyseessä on siis normaali HTML-sivu, jonka <i>body</i>-osassa määritellään selaimessa näytettävän sivun rakenne:</p>
<p><img src="../images/0/5.png"/></p>
<p>Sivu sisältää <a href="https://developer.mozilla.org/en-US/docs/Web/HTML/Element/div" target="_blank" rel="nofollow noopener noreferrer">div</a>-elementin, jonka sisällä on otsikko sekä tieto luotujen muistiinpanojen määrästä, linkki sivulle <i>muistiinpanot</i> ja kuvaa vastaava <a href="https://developer.mozilla.org/en-US/docs/Web/HTML/Element/img" target="_blank" rel="nofollow noopener noreferrer">img</a>-tagi.</p>
<p>img-tagin ansiosta selain tekee toisenkin <i>HTTP-pyynnön</i>, jonka avulla se hakee kuvan <i>kuva.png</i> palvelimelta. Pyynnön tiedot näyttävät seuraavalta:</p>
<p><img src="../images/0/6.png"/></p>
<p>eli pyyntö on tehty osoitteeseen <a href="https://fullstack-exampleapp.herokuapp.com/kuva.png" target="_blank" rel="nofollow noopener noreferrer">https://fullstack-exampleapp.herokuapp.com/kuva.png</a> ja se on tyypiltään HTTP GET. Vastaukseen liittyvät headerit kertovat että vastauksen koko on 89350 tavua ja vastauksen <a href="https://developer.mozilla.org/en-US/docs/Web/HTTP/Headers/Content-Type" target="_blank" rel="nofollow noopener noreferrer">Content-type</a> on <i>image/png</i>, eli kyseessä on png-tyyppinen kuva. Tämän tiedon ansiosta selain tietää, miten kuva on piirrettävä HTML-sivulle.</p>
<p>Sivun <a href="https://fullstack-exampleapp.herokuapp.com/" target="_blank" rel="nofollow noopener noreferrer">https://fullstack-exampleapp.herokuapp.com/</a> avaaminen selaimessa saa siis aikaan allaolevan <a href="https://github.com/mluukkai/Ohjelmistotekniikka2018/blob/master/web/materiaali.md#sekvenssikaaviot" target="_blank" rel="nofollow noopener noreferrer">sekvenssikaavion</a> kuvaaman tapahtumasarjan</p>
<p><img src="../images/0/7b.png"/></p>
<p>Ensin selain tekee palvelimelle HTTP GET -pyynnön, jonka avulla se hakee sivun HTML-koodin. HTML-koodissa olevan <i>img</i>-tagin ansiosta selain hakee palvelimelta kuvan <i>kuva.png</i>. Selain renderöi HTML-kielellä muotoillun sivun ja kuvan näytölle. Vaikka käyttäjä ei sitä helposti huomaa, alkaa sivu renderöityä näytölle jo ennen kuvan hakemista.</p>
<h3>Perinteinen web-sovellus</h3>
<p>Esimerkkisovelluksen pääsivu toimii <i>perinteisen web-sovelluksen</i> tapaan. Mentäessä sivulle, selain hakee palvelimelta sivun strukturoinnin ja tekstuaalisen sisällön määrittelevän HTML-dokumentin.</p>
<p>Palvelin on muodostanut dokumentin jollain tavalla. Dokumentti voi olla <i>staattista sisältöä</i> eli palvelimen hakemistossa oleva tekstitiedosto. Dokumentti voi myös olla <i>dynaaminen</i>, eli palvelin voi muodostaa HTML-dokumentit ohjelmakoodin avulla hyödyntäen esim. tietokannassa olevaa dataa. Esimerkkisovelluksessa sivun HTML-koodi on muodostettu dynaamisesti, sillä se sisältää tiedon luotujen muistiinpanojen lukumäärästä.</p>
<p>Etusivun muodostava koodi näyttää seuraavalta:</p>
<pre><code class="language-js">const getFrontPageHtml = noteCount =&gt; {
  return `
    &lt;!DOCTYPE html&gt;
    &lt;html&gt;
      &lt;head&gt;
      &lt;/head&gt;
      &lt;body&gt;
        &lt;div class=&quot;container&quot;&gt;
          &lt;h1&gt;Full stack -esimerkkisovellus&lt;/h1&gt;
          &lt;p&gt;muistiinpanoja luotu ${noteCount} kappaletta&lt;/p&gt;
          &lt;a href=&quot;/notes&quot;&gt;muistiinpanot&lt;/a&gt;
          &lt;img src=&quot;kuva.png&quot; width=&quot;200&quot; /&gt;
        &lt;/div&gt;
      &lt;/body&gt;
    &lt;/html&gt;
  `
}

app.get(&#x27;/&#x27;, (req, res) =&gt; {
  const page = getFrontPageHtml(notes.length)
  res.send(page)
})
</code></pre>
<p>Koodia ei tarvitse vielä ymmärtää, mutta käytännössä HTML-sivun sisältö on talletettu ns. template stringinä, eli merkkijonona, jonka sekaan on mahdollisuus evaluoida esim. muuttujien arvoja. Etusivun dynaamisesti muuttuva osa, eli muistiinpanojen lukumäärä (koodissa <em>noteCount</em>) korvataan template stringissä sen hetkisellä konkreettisella lukuarvolla (koodissa <em>notes.length</em>).</p>
<p>HTML:n kirjoittaminen suoraan koodin sekaan ei tietenkään ole järkevää, mutta vanhan liiton PHP-ohjelmoijille se oli arkipäivää.</p>
<p>Perinteisissä websovelluksissa selain on &quot;tyhmä&quot;, se ainoastaan pyytää palvelimelta HTML-muodossa olevia sisältöjä, kaikki sovelluslogiikka on palvelimessa. Palvelin voi olla tehty esim. kurssin <a href="https://courses.helsinki.fi/fi/tkt21007/119558639" target="_blank" rel="nofollow noopener noreferrer">Web-palvelinohjelmointi</a> tapaan Java Springillä tai <a href="https://materiaalit.github.io/tsoha-18/" target="_blank" rel="nofollow noopener noreferrer">tietokantasovelluksessa</a> käytetyllä Python Flaskillä tai <a href="http://rubyonrails.org/" target="_blank" rel="nofollow noopener noreferrer">Ruby on Railsilla</a>. Esimerkissä on käytetty Node.js:n <a href="https://expressjs.com/" target="_blank" rel="nofollow noopener noreferrer">Express</a>-sovelluskehystä. Tulemme käyttämään kurssilla Node.js:ää ja Expressiä web-palvelimen toteuttamiseen.</p>
<h3>Selaimessa suoritettava sovelluslogiikka</h3>
<p>Pidä konsoli edelleen auki. Tyhjennä konsolin näkymä painamalla vasemmalla olevaa ∅-symbolia.</p>
<p>Kun menet nyt <a href="https://fullstack-exampleapp.herokuapp.com/notes" target="_blank" rel="nofollow noopener noreferrer">muistiinpanojen</a> sivulle, selain tekee 4 HTTP-pyyntöä:</p>
<p><img src="../images/0/8.png"/></p>
<p>Kaikki pyynnöt ovat <i>eri tyyppisiä</i>. Ensimmäinen pyyntö on tyypiltään <i>document</i>.
Kyseessä on sivun HTML-koodi, joka näyttää seuraavalta:</p>
<p><img src="../images/0/9.png"/></p>
<p>Kun vertaamme, selaimen näyttämää sivua ja pyynnön palauttamaa HTML-koodia, huomaamme, että koodi ei sisällä ollenkaan muistiinpanoja sisältävää listaa.</p>
<p>HTML-koodin <a href="https://developer.mozilla.org/en-US/docs/Web/HTML/Element/head" target="_blank" rel="nofollow noopener noreferrer">head</a>-osio sisältää <a href="https://developer.mozilla.org/en-US/docs/Web/HTML/Element/script" target="_blank" rel="nofollow noopener noreferrer">script</a>-tagin, jonka ansiosta selain lataa <i>main.js</i>-nimisen Javascript-tiedoston palvelimelta.</p>
<p>Ladattu Javascript-koodi näyttää seuraavalta:</p>
<pre><code class="language-js">var xhttp = new XMLHttpRequest()

xhttp.onreadystatechange = function() {
  if (this.readyState == 4 &amp;&amp; this.status == 200) {
    const data = JSON.parse(this.responseText)
    console.log(data)

    var ul = document.createElement(&#x27;ul&#x27;)
    ul.setAttribute(&#x27;class&#x27;, &#x27;notes&#x27;)

    data.forEach(function(note) {
      var li = document.createElement(&#x27;li&#x27;)

      ul.appendChild(li)
      li.appendChild(document.createTextNode(note.content))
    })

    document.getElementById(&#x27;notes&#x27;).appendChild(ul)
  }
)

xhttp.open(&#x27;GET&#x27;, &#x27;/data.json&#x27;, true)
xhttp.send()
</code></pre>
<p>Koodin yksityiskohdat eivät ole tässä osassa oleellisia, koodia on kuitenkin liitetty mukaan tekstin ja kuvien mausteeksi. Pääsemme kunnolla koodin pariin vasta <a href="/osa1">osassa 1</a>. Tämän osan esimerkkisovelluksen koodi ei itseasiassa ole ollenkaan relevanttia kurssilla käytettävien ohjelmointitekniikoiden kannalta.</p>
<blockquote>
<p>Joku saattaa ihmetellä miksi käytössä on xhttp-olio eikä modernimpi fetch. Syynä on se, että tässä osassa ei haluta mennä ollenkaan promiseihin ja koodin rooli esimerkissä on muutenkin sekundäärinen. Palaamme osassa 2 uudenaikaisempiin tapoihin tehdä pyyntöjä palvelimelle.</p>
</blockquote>
<p>Heti ladattuaan <i>script</i>-tagin sisältämän Javascriptin selain suorittaa koodin.</p>
<p>Kaksi viimeistä riviä määrittelevät, että selain tekee GET-tyyppisen HTTP-pyynnön palvelimen osoitteeseen <i>/data.json</i>:</p>
<pre><code class="language-js">xhttp.open(&#x27;GET&#x27;, &#x27;/data.json&#x27;, true)
xhttp.send()
</code></pre>
<p>Kyseessä on alin Network-välilehden näyttämistä selaimen tekemistä pyynnöistä.</p>
<p>Voimme kokeilla mennä osoitteeseen <a href="https://fullstack-exampleapp.herokuapp.com/data.json" target="_blank" rel="nofollow noopener noreferrer">https://fullstack-exampleapp.herokuapp.com/data.json</a> suoraan selaimella:</p>
<p><img src="../images/0/10.png"/></p>
<p>Osoitteesta löytyvät muistiinpanot <a href="https://en.wikipedia.org/wiki/JSON" target="_blank" rel="nofollow noopener noreferrer">JSON</a>-muotoisena &quot;raakadatana&quot;. Oletusarvoisesti selain ei osaa näyttää JSON-dataa kovin hyvin, mutta on olemassa lukuisia plugineja, jotka hoitavat muotoilun. Asenna nyt Chromeen esim. <a href="https://chrome.google.com/webstore/detail/jsonview/chklaanhfefbnpoihckbnefhakgolnmc" target="_blank" rel="nofollow noopener noreferrer">JSONView</a> ja lataa sivu uudelleen. Data on nyt miellyttävämmin muotoiltua:</p>
<p><img src="../images/0/11.png"/></p>
<p>Ylläoleva muistiinpanojen sivun Javascript-koodi siis lataa muistiinpanot sisältävän JSON-muotoisen datan ja muodostaa datan avulla selaimeen &quot;bulletlistan&quot; muistiinpanojen sisällöstä:</p>
<p>Tämän saa aikaan seuraava koodi:</p>
<pre><code class="language-js">const data = JSON.parse(this.responseText)
console.log(data)

var ul = document.createElement(&#x27;ul&#x27;)
ul.setAttribute(&#x27;class&#x27;, &#x27;notes&#x27;)

data.forEach(function(note) {
  var li = document.createElement(&#x27;li&#x27;)

  ul.appendChild(li)
  li.appendChild(document.createTextNode(note.content))
})

document.getElementById(&#x27;notes&#x27;).appendChild(ul)
</code></pre>
<p>Koodi muodostaa ensin järjestämätöntä listaa edustavan <a href="https://developer.mozilla.org/en-US/docs/Web/HTML/Element/ul" target="_blank" rel="nofollow noopener noreferrer">ul</a>-tagin:</p>
<pre><code class="language-js">var ul = document.createElement(&#x27;ul&#x27;)
ul.setAttribute(&#x27;class&#x27;, &#x27;notes&#x27;)
</code></pre>
<p>ja lisää ul:n sisään yhden <a href="https://developer.mozilla.org/en-US/docs/Web/HTML/Element/li" target="_blank" rel="nofollow noopener noreferrer">li</a>-elementin kutakin muistiinpanoa kohti. Ainoastaan muistiinpanon <i>content</i>-kenttä tulee li-elementin sisällöksi, raakadatassa olevia aikaleimoja ei käytetä mihinkään.</p>
<pre><code class="language-js">data.forEach(function(note) {
  var li = document.createElement(&#x27;li&#x27;)

  ul.appendChild(li)
  li.appendChild(document.createTextNode(note.content))
})
</code></pre>
<p>Avaa nyt konsolin <i>Console</i>-välilehti:</p>
<p><img src="../images/0/12.png"/></p>
<p>Painamalla rivin alussa olevaa kolmiota saat laajennettua konsolissa olevan rivin:</p>
<p><img src="../images/0/13.png"/></p>
<p>Konsoliin ilmestynyt tulostus johtuu siitä, että koodiin oli lisätty komento <em>console.log</em>:</p>
<pre><code class="language-js">const data = JSON.parse(this.responseText)
console.log(data)
</code></pre>
<p>eli vastaanotettuaan datan palvelimelta, koodi tulostaa datan konsoliin.</p>
<p>Konsolin välilehti <i>Console</i> sekä komento <em>console.log</em> tulevat varmasti erittäin tutuiksi kurssin kuluessa.</p>
<h3>Tapahtumankäsittelijä ja takaisinkutsu</h3>
<p>Koodin rakenne on hieman erikoinen:</p>
<pre><code class="language-js">var xhttp = new XMLHttpRequest()

xhttp.onreadystatechange = function() {
  // koodi, joka käsittelee palvelimen vastauksen
}

xhttp.open(&#x27;GET&#x27;, &#x27;/data.json&#x27;, true)
xhttp.send()
</code></pre>
<p>eli palvelimelle tehtävä pyyntö suoritetaan vasta viimeisellä rivillä. Palvelimen vastauksen käsittelyn määrittelevä koodi on kirjoitettu jo aiemmin. Mistä on kyse?</p>
<p>Rivillä</p>
<pre><code class="language-js">xhttp.onreadystatechange = function () {
</code></pre>
<p>kyselyn tekevään <em>xhttp</em>-olioon määritellään <i>tapahtumankäsittelijä</i> (event handler) tilanteelle <i>onreadystatechange</i>. Kun kyselyn tekevän olion tila muuttuu, kutsuu selain tapahtumankäsittelijänä olevaa funktiota. Funktion koodi tarkastaa, että <a href="https://developer.mozilla.org/en-US/docs/Web/API/XMLHttpRequest/readyState" target="_blank" rel="nofollow noopener noreferrer">readyState</a>:n arvo on 4 (joka kuvaa tilannetta <i>The operation is complete</i>) ja, että vastauksen HTTP-statuskoodi on onnistumisesta kertova 200.</p>
<pre><code class="language-js">xhttp.onreadystatechange = function() {
  if (this.readyState == 4 &amp;&amp; this.status == 200) {
    // koodi, joka käsittelee palvelimen vastauksen
  }
)
</code></pre>
<p>Tapahtumankäsittelijöihin liittyvä mekanismi koodin suorittamiseen on Javascriptissä erittäin yleistä. Tapahtumankäsittelijöinä olevia Javascript-funktioita kutsutaan <a href="https://developer.mozilla.org/en-US/docs/Glossary/Callback_function" target="_blank" rel="nofollow noopener noreferrer">callback</a>- eli takaisinkutsufunktioiksi, sillä sovelluksen koodi ei kutsu niitä itse, vaan suoritusympäristö, eli web-selain suorittaa funktion kutsumisen sopivana ajankohtana, eli kyseisen <i>tapahtuman</i> tapahduttua.</p>
<h3>Document Object Model eli DOM</h3>
<p>Voimme ajatella, että HTML-sivut muodostavat implisiittisen puurakenteen</p>
<pre>

html
  head
    link
    script
  body
    div
      h1
      div
        ul
          li
          li
          li
      form
        input
        input
</pre>
<p>Sama puumaisuus on nähtävissä konsolin välilehdellä Elements</p>
<p><img src="../images/0/14.png"/></p>
<p>Selainten toiminta perustuukin ideaan esittää HTML-elementit puurakenteena.</p>
<p>Document Object Model eli <a href="https://en.wikipedia.org/wiki/Document_Object_Model" target="_blank" rel="nofollow noopener noreferrer">DOM</a> on ohjelmointirajapinta eli <i>API</i>, joka mahdollistaa selaimessa esitettävien web-sivuja vastaavien <i>elementtipuiden</i> muokkaamisen ohjelmallisesti.</p>
<p>Edellisessä luvussa esittelemämme Javascript-koodi käytti nimenomaan DOM-apia lisätäkseen sivulle muistiinpanojen listan.</p>
<p>Allaoleva koodi luo muuttujaan <em>ul</em> DOM-apin avulla uuden &quot;solmun&quot; ja lisää sille joukon lapsisolmuja:</p>
<pre><code class="language-js">var ul = document.createElement(&#x27;ul&#x27;)

data.forEach(function(note) {
  var li = document.createElement(&#x27;li&#x27;)

  ul.appendChild(li)
  li.appendChild(document.createTextNode(note.content))
})
</code></pre>
<p>lopulta muuttujassa <em>ul</em> oleva puun palanen yhdistetään sopivaan paikkaan koko sovelluksen HTML-koodia edustavassa puussa:</p>
<pre><code class="language-js">document.getElementById(&#x27;notes&#x27;).appendChild(ul)
</code></pre>
<h3>document-olio ja sivun manipulointi konsolista</h3>
<p>HTML-dokumenttia esittävän DOM-puun ylimpänä solmuna on olio nimeltään <em>document</em>. Olioon pääsee käsiksi Console-välilehdeltä:</p>
<p><img src="../images/0/15.png"/></p>
<p>Voimme suorittaa konsolista käsin DOM-apin avulla erilaisia operaatioita selaimessa näytettävälle web-sivulle hyödyntämällä <em>document</em>-olioa.</p>
<p>Lisätään nyt sivulle uusi muistiinpano suoraan konsolista.</p>
<p>Haetaan ensin sivulta muistiinpanojen lista, eli sivun ul-elementeistä ensimmäinen:</p>
<pre><code class="language-js">lista = document.getElementsByTagName(&#x27;ul&#x27;)[0]
</code></pre>
<p>luodaan uusi li-elementti ja lisätään sille sopiva tekstisisältö:</p>
<pre><code class="language-js">uusi = document.createElement(&#x27;li&#x27;)
uusi.textContent = &#x27;Sivun manipulointi konsolista on helppoa&#x27;
</code></pre>
<p>liitetään li-elementti listalle:</p>
<pre><code class="language-js">lista.appendChild(uusi)
</code></pre>
<p><img src="../images/0/16.png"/></p>
<p>Vaikka selaimen näyttämä sivu päivittyy, ei muutos ole lopullinen. Jos sivu uudelleenladataan, katoaa uusi muistiinpano, sillä muutos ei mennyt palvelimelle asti. Selaimen lataama Javascript luo muistiinpanojen listan aina palvelimelta osoitteesta <a href="https://fullstack-exampleapp.herokuapp.com/data.json" target="_blank" rel="nofollow noopener noreferrer">https://fullstack-exampleapp.herokuapp.com/data.json</a> haettavan JSON-muotoisen raakadatan perusteella.</p>
<h3>CSS</h3>
<p>Muistiinpanojen sivun HTML-koodin <i>head</i>-osio sisältää <a href="https://developer.mozilla.org/en-US/docs/Web/HTML/Element/link" target="_blank" rel="nofollow noopener noreferrer">link</a>-tagin, joka määrittelee, että selaimen tulee ladata palvelimelta osoitteesta <a href="https://fullstack-exampleapp.herokuapp.com/main.css" target="_blank" rel="nofollow noopener noreferrer">main.css</a> sivulla käytettävä <a href="https://developer.mozilla.org/en-US/docs/Web/CSS" target="_blank" rel="nofollow noopener noreferrer">CSS</a>-tyylitiedosto.</p>
<p>Cascading Style Sheets eli CSS on kieli, jonka avulla web-sovellusten ulkoasu määritellään.</p>
<p>Ladattu css-tiedosto näyttää seuraavalta:</p>
<pre><code class="language-css">.container {
  padding: 10px;
  border: 1px solid;
}

.notes {
  color: blue;
}
</code></pre>
<p>Tiedosto määrittelee kaksi <a href="https://developer.mozilla.org/en-US/docs/Web/CSS/Class_selectors" target="_blank" rel="nofollow noopener noreferrer">luokkaselektoria</a>, joiden avulla valitaan tietty sivun alue ja määritellään alueelle sovellettavat tyylisäännöt.</p>
<p>Luokkaselektori alkaa aina pisteellä ja sisältää luokan nimen.</p>
<p>Luokat ovat <a href="https://developer.mozilla.org/en-US/docs/Web/HTML/Global_attributes/class" target="_blank" rel="nofollow noopener noreferrer">attribuutteja</a> joita voidaan liittää HTML-elementeille.</p>
<p>Konsolin <i>Elements</i>-välilehti mahdollistaa class-attribuuttien tarkastelun:</p>
<p><img src="../images/0/17.png"/></p>
<p>sovelluksen uloimmalle <i>div</i>-elementille on siis liitetty luokka <i>container</i>. Muistiinpanojen listan sisältävä <i>ul</i>-elementin sisällä oleva lista sisältää luokan <i>notes</i>.</p>
<p>CSS-säännön avulla on määritelty, että <i>container</i>-luokan sisältävä elementti ympäröidään yhden pikselin paksuisella <a href="https://developer.mozilla.org/en-US/docs/Web/CSS/border" target="_blank" rel="nofollow noopener noreferrer">border</a>:illa. Elementille asetetaan myös 10 pikselin <a href="https://developer.mozilla.org/en-US/docs/Web/CSS/padding" target="_blank" rel="nofollow noopener noreferrer">padding</a>, jonka ansiosta elementin sisällön ja elementin ulkorajan väliin jätetään hieman tilaa.</p>
<p>Toinen määritelty CSS-sääntö asettaa muistiinpanojen kirjainten värin siniseksi.</p>
<p>HTML-elementeillä on muitakin attribuutteja kuin luokkia. Muistiinpanot sisältävä <i>div</i>-elementti sisältää <a href="https://developer.mozilla.org/en-US/docs/Web/HTML/Global_attributes/id" target="_blank" rel="nofollow noopener noreferrer">id</a>-attribuutin. Javascript-koodi hyödyntää attribuuttia elementin etsimiseen.</p>
<p>Konsolin <i>Elements</i>-välilehdellä on mahdollista manipuloida elementtien tyylejä:</p>
<p><img src="../images/0/18.png"/></p>
<p>Tehdyt muutokset eivät luonnollisestikaan jää voimaan kun selaimen sivu uudelleenladataan, eli jos muutokset halutaan pysyviksi, tulee ne konsolissa tehtävien kokeilujen jälkeen tallettaa palvelimella olevaan tyylitiedostoon.</p>
<h3>Javascriptia sisältävän sivun lataaminen - kertaus</h3>
<p>Kerrataan vielä mitä tapahtuu kun selaimessa avataan sivu <a href="https://fullstack-exampleapp.herokuapp.com/notes" target="_blank" rel="nofollow noopener noreferrer">https://fullstack-exampleapp.herokuapp.com/notes</a></p>
<p><img src="../images/0/19b.png"/></p>
<ul>
<li>selain hakee palvelimelta sivun sisällön ja rakenteen määrittelevän HTML-koodin HTTP GET -pyynnöllä</li>
<li>HTML-koodi saa aikaan sen, että selain hakee sivun tyylit määrittelevän tiedoston <i>main.css</i></li>
<li>sekä Javascript-koodia sisältävän tiedoston <i>main.js</i></li>
<li>selain alkaa suorittaa hakemaansa Javascript-koodia, joka tekee HTTP GET -pyynnön muistiinpanot json-muotoisena raakadatana palauttavaan osoitteeseen <a href="https://fullstack-exampleapp.herokuapp.com/data.json" target="_blank" rel="nofollow noopener noreferrer">https://fullstack-exampleapp.herokuapp.com/data.json</a></li>
<li>datan saapuessa selain suorittaa <i>tapahtumankäsittelijän</i>, joka renderöi DOM-apia hyväksikäyttäen muistiinpanot ruudulle</li>
</ul>
<h3>Lomake ja HTTP POST</h3>
<p>Tutkitaan seuraavaksi sitä, miten uusien muistiinpanojen luominen tapahtuu. Tätä varten muistiinpanojen sivu sisältää lomakkeen eli <a href="https://developer.mozilla.org/en-US/docs/Learn/HTML/Forms/Your_first_HTML_form" target="_blank" rel="nofollow noopener noreferrer">form-elementin</a>.</p>
<p><img src="../images/0/20.png"/></p>
<p>Kun lomakkeen painiketta painetaan, lähettää selain lomakkeelle syötetyn datan palvelimelle. Avataan <i>Network</i>-välilehti ja katsotaan miltä lomakkeen lähettäminen näyttää:</p>
<p><img src="../images/0/21.png"/></p>
<p>Lomakkeen lähettäminen aiheuttaa yllättäen yhteensä <i>viisi</i> HTTP-pyyntöä. Näistä ensimmäinen vastaa lomakkeen lähetystapahtumaa. Tarkennetaan siihen:</p>
<p><img src="../images/0/22.png"/></p>
<p>Kyseessä on siis <a href="https://developer.mozilla.org/en-US/docs/Web/HTTP/Methods/POST" target="_blank" rel="nofollow noopener noreferrer">HTTP POST</a> -pyyntö ja se on tehty palvelimen osoitteeseen <i>new_note</i>. Palvelin vastaa pyyntöön HTTP-statuskoodilla 302. Kyseessä on ns. <a href="https://en.wikipedia.org/wiki/URL_redirection" target="_blank" rel="nofollow noopener noreferrer">uudelleenohjauspyyntö</a> eli redirectaus, minkä avulla palvelin kehottaa selainta tekemään automaattisesti uuden HTTP GET -pyynnön headerin <i>Location</i> kertomaan paikkaan, eli osoitteeseen <i>notes</i>.</p>
<p>Selain siis lataa uudelleen muistiinpanojen sivun. Sivunlataus saa aikaan myös kolme muuta HTTP-pyyntöä: tyylitiedoston (main.css), Javascript-koodin (main.js) ja muistiinpanojen raakadatan (data.json) lataamisen.</p>
<p>Network-välilehti näyttää myös lomakkeen mukana lähetetyn datan:</p>
<p><img src="../images/0/23.png"/></p>
<p>Lomakkeen lähettäminen tapahtuu HTTP POST -pyyntönä ja osoitteeseen <i>new_note</i> form-tagiin määriteltyjen attribuuttien <i>action</i>  ja <i>method</i>  ansiosta:</p>
<p><img src="../images/0/24.png"/></p>
<p>POST-pyynnöstä huolehtiva palvelimen koodi on yksinkertainen (huom: tämä koodi on siis palvelimella eikä näy selaimen lataamassa Javascript-tiedostossa):</p>
<pre><code class="language-js">app.post(&#x27;/new_note&#x27;, (req, res) =&gt; {
  notes.push({
    content: req.body.note,
    date: new Date(),
  })

  return res.redirect(&#x27;/notes&#x27;)
})
</code></pre>
<p>POST-pyyntöihin liitettävä data lähetetään pyynnön mukana &quot;runkona&quot; eli <a href="https://developer.mozilla.org/en-US/docs/Web/HTTP/Methods/POST" target="_blank" rel="nofollow noopener noreferrer">bodynä</a>. Palvelin saa POST-pyynnön datan pyytämällä sitä pyyntöä vastaavan olion <em>req</em> kentästä <em>req.body</em>.</p>
<p>Tekstikenttään kirjoitettu data on kentässä <i>note</i>, eli palvelin viittaa siihen <em>req.body.note</em>.</p>
<p>Palvelin luo uutta muistiinpanoa vastaavan olion ja laittaa sen muistiinpanot sisältävään taulukkoon nimeltään <em>notes</em>:</p>
<pre><code class="language-js">notes.push({
  content: req.body.note,
  date: new Date(),
})
</code></pre>
<p>Muistiinpano-olioilla on siis kaksi kenttää, varsinaisen sisällön kuvaava <i>content</i> ja luomishetken kertova <i>date</i>.</p>
<p>Palvelin ei talleta muistiinpanoja tietokantaan, joten uudet muistiinpanot katoavat aina Herokun uudelleenkäynnistäessä palvelun.</p>
<h3>AJAX</h3>
<p>Sovelluksen muistiinpanojen sivu noudattaa vuosituhannen alun tyyliä ja se &quot;käyttää AJAX:ia&quot;, eli on silloisen kehityksen aallonharjalla.</p>
<p><a href="https://en.wikipedia.org/wiki/Ajax_(programming)" target="_blank" rel="nofollow noopener noreferrer">AJAX</a> (Asynchronous Javascript and XML) on termi, joka lanseerattiin vuoden 2005 helmikuussa kuvaamaan selainten kehityksen mahdollistamaa vallankumouksellista tapaa, missä HTML-sivulle sisällytetyn Javascriptin avulla oli mahdollista ladata sivulle lisää sisältöä lataamatta itse sivua uudelleen.</p>
<p>Ennen AJAX:in aikakautta jokainen sivu toimi aiemmassa luvussa olevan <a href="/osa0#perinteinen-web-sovellus">perinteisen web-sovelluksen</a> tapaan, eli oleellisesti ottaen kaikki sivuilla näytettävä data tuli palvelimen generoimassa HTML-koodissa.</p>
<p>Muistiinpanojen sivu siis lataa näytettävän datan AJAX:illa. Lomakkeen lähetys sen sijaan tapahtuu perinteisen web-lomakkeen lähetysmekanismin kautta.</p>
<p>Sovelluksen urlit heijastavat vanhaa huoletonta aikaa. JSON-muotoinen data haetaan urlista <a href="https://fullstack-exampleapp.herokuapp.com/data.json" target="_blank" rel="nofollow noopener noreferrer">https://fullstack-exampleapp.herokuapp.com/data.json</a> ja uuden muistiinpanon tiedot lähetetään urliin <a href="https://fullstack-exampleapp.herokuapp.com/new_note" target="_blank" rel="nofollow noopener noreferrer">https://fullstack-exampleapp.herokuapp.com/new_note</a>. Nykyään näin valittuja urleja ei pidettäisi ollenkaan hyvinä, ne eivät noudata ns. <a href="https://en.wikipedia.org/wiki/Representational_state_transfer#Applied_to_Web_services" target="_blank" rel="nofollow noopener noreferrer">RESTful</a>-apien yleisesti hyväksyttyjä konventioita. Käsittelemme asiaa tarkemmin <a href="/osa3">osassa 3</a>.</p>
<p>AJAXiksi kutsuttu asia on arkipäiväistynyt, ja muuttunut itsestäänselvyydeksi. Koko termi on hiipunut unholaan ja nuori polvi ei ole sitä edes ikinä kuullut.</p>
<h3>Single page app</h3>
<p>Esimerkkisovelluksemme pääsivu toimii perinteisten web-sivujen tapaan: kaikki sovelluslogiikka on palvelimella ja selain ainoastaan renderöi palvelimen lähettämää HTML-koodia.</p>
<p>Muistiinpanoista huolehtivassa sivussa osa sovelluslogiikasta, eli olemassaolevien muistiinpanojen HTML-koodin generointi on siirretty selaimen vastuulle. Selain hoitaa tehtävän suorittamalla palvelimelta lataamansa Javascript-koodin. Selaimella suoritettava koodi hakee ensin muistiinpanot palvelimelta JSON-muotoisena raakadatana ja lisää sivulle muistiinpanoja edustavat HTML-elementit <a href="/osa0#document-object-model-eli-dom">DOM-apia</a> hyödyntäen.</p>
<p>Viimeisten vuosien aikana on noussut esiin tyyli tehdä web-sovellukset käyttäen <a href="https://en.wikipedia.org/wiki/Single-page_application" target="_blank" rel="nofollow noopener noreferrer">Single-page application</a> (SPA) -tyyliä, missä sovelluksilla ei enää ole esimerkkisovelluksemme tapaan erillisiä, palvelimen sille lähettämiä sivuja, vaan sovellus koostuu ainoastaan yhdestä palvelimen lähettämästä HTML-sivusta, jonka sisältöä manipuloidaan selaimessa suoritettavalla Javascriptillä.</p>
<p>Sovelluksemme muistiinpanosivu muistuttaa jo hiukan SPA-tyylistä sovellusta, sitä se ei kuitenkaan vielä ole, sillä vaikka muistiinpanojen renderöintilogiikka on toteutettu selaimessa, käyttää sivu vielä perinteistä mekanisimia uusien muistiinpanojen luomiseen, eli se lähettää uuden muistiinpanon tiedot lomakkeen avulla ja palvelin pyytää <i>uudelleenohjauksen</i> avulla selainta lataamaan muistiinpanojen sivun uudelleen.</p>
<p>Osoitteesta <a href="https://fullstack-exampleapp.herokuapp.com/spa" target="_blank" rel="nofollow noopener noreferrer">https://fullstack-exampleapp.herokuapp.com/spa</a> löytyy sovelluksen single page app -versio.</p>
<p>Sovellus näyttää ensivilkaisulta täsmälleen samalta kuin edellinen versio.</p>
<p>HTML-koodi on lähes samanlainen, erona on ladattava Javascript-tiedosto (<i>spa.js</i>) ja pieni muutos form-tagin määrittelyssä:</p>
<p><img src="../images/0/25.png"/></p>
<p>Lomakkeelle ei ole nyt määritelty ollenkaan <i>action</i>- eikä <i>method</i>-attribuutteja, jotka määräävät minne ja miten selain lähettää lomakkeelle syötetyn datan.</p>
<p>Avaa nyt <i>Network</i>-välilehti ja tyhjennä se ∅-symbolilla. Kun luot uuden muistiinpanon, huomaat, että selain lähettää ainoastaan yhden pyynnön palvelimelle:</p>
<p><img src="../images/0/26.png"/></p>
<p>Pyyntö kohdistuu osoitteeseen <i>new_note_spa</i>, on tyypiltään POST ja se sisältää JSON-muodossa olevan uuden muistiinpanon, johon kuuluu sekä sisältö (<i>content</i>), että aikaleima (<i>date</i>):</p>
<pre><code class="language-js">{
  content: &quot;single page app ei tee turhia sivunlatauksia&quot;,
  date: &quot;2019-01-03T15:11:22.123Z&quot;
}
</code></pre>
<p>Pyyntöön liitetty headeri <i>Content-Type</i> kertoo palvelimelle, että pyynnön mukana tuleva data on JSON-muotoista:</p>
<p><img src="../images/0/27.png"/></p>
<p>Ilman headeria palvelin ei osaisi parsia pyynnön mukana tulevaa dataa oiken.</p>
<p>Palvelin vastaa kyselyyn statuskoodilla <a href="https://httpstatuses.com/201" target="_blank" rel="nofollow noopener noreferrer">201 created</a>. Tällä kertaa palvelin ei pyydä uudelleenohjausta kuten aiemmassa versiossamme. Selain pysyy samalla sivulla ja muita HTTP-pyyntöjä ei suoriteta.</p>
<p>Ohjelman single page app -versiossa lomakkeen tietoja ei lähetetä selaimen normaalin lomakkeiden lähetysmekanismin avulla, lähettämisen hoitaa selaimen lataamassa Javascript-tiedostossa määritelty koodi. Katsotaan hieman koodia vaikka yksityiskohdista ei tarvitse nytkään välittää liikaa.</p>
<pre><code class="language-js">var form = document.getElementById(&#x27;notes_form&#x27;)
form.onsubmit = function(e) {
  e.preventDefault()

  var note = {
    content: e.target.elements[0].value,
    date: new Date(),
  )

  notes.push(note)
  e.target.elements[0].value = &#x27;&#x27;
  redrawNotes()
  sendToServer(note)
)
</code></pre>
<p>Komennolla <em>document.getElementById(&#x27;notes_form&#x27;)</em> koodi hakee sivulta lomake-elementin ja rekisteröi sille <i>tapahtumankäsittelijän</i> hoitamaan tilanteen, missä lomake &quot;submitoidaan&quot;, eli lähetetään. Tapahtumankäsittelijä kutsuu heti metodia <em>e.preventDefault()</em> jolla se estää lomakkeen lähetyksen oletusarvoisen toiminnan. Oletusarvoinen toiminta aiheuttaisi lomakkeen lähettämisen ja sivun uudelleen lataamisen, sitä emme single page -sovelluksissa halua tapahtuvan.</p>
<p>Tämän jälkeen se luo muistiinpanon, lisää sen muistiinpanojen listalle komennolla <em>notes.push(note)</em>, piirtää ruudun sisällön eli muistiinpanojen listan uudelleen ja lähettää uuden muistiinpanon palvelimelle.</p>
<p>Palvelimelle muistiinpanon lähettävä koodi seuraavassa:</p>
<pre><code class="language-js">var sendToServer = function(note) {
  var xhttpForPost = new XMLHttpRequest()
  // ...

  xhttpForPost.open(&#x27;POST&#x27;, &#x27;/new_note_spa&#x27;, true)
  xhttpForPost.setRequestHeader(
    &#x27;Content-type&#x27;, &#x27;application/json&#x27;
  )
  xhttpForPost.send(JSON.stringify(note))
)
</code></pre>
<p>Koodissa siis määritellään, että kyse on HTTP POST -pyynnöstä, määritellään headerin <i>Content-type</i> avulla lähetettävän datan tyypiksi JSON, ja lähetetään data JSON-merkkijonona.</p>
<p>Sovelluksen koodi on nähtävissä osoitteessa <a href="https://github.com/mluukkai/example_app" target="_blank" rel="nofollow noopener noreferrer">https://github.com/mluukkai/example_app</a>. Kannattaa huomata, että sovellus on tarkoitettu ainoastaan kurssin käsitteistöä demonstroivaksi esimerkiksi, koodi on osin tyyliltään huonoa ja siitä ei tule ottaa mallia omia sovelluksia tehdessä. Sama koskee käytettyjä urleja, single page app -tyyliä noudattavan sivun käyttämä uusien muistiinpanojen kohdeosoite <i>new_note_spa</i> ei noudata nykyisin suositeltavia käytäntöjä.</p>
<h3>Javascript-kirjastot</h3>
<p>Kurssin esimerkkisovellus on tehty ns. <a href="https://medium.freecodecamp.org/is-vanilla-javascript-worth-learning-absolutely-c2c67140ac34" target="_blank" rel="nofollow noopener noreferrer">vanilla Javascriptillä</a> eli käyttäen pelkkää DOM-apia ja Javascript-kieltä sivujen rakenteen manipulointiin.</p>
<p>Pelkän Javascriptin ja DOM-apin käytön sijaan Web-ohjelmoinnissa hyödynnetään yleensä kirjastoja, jotka sisältävät DOM-apia helpommin käytettäviä työkaluja sivujen muokkaamiseen. Eräs tälläinen kirjasto on edelleenkin hyvin suosittu <a href="https://jquery.com/" target="_blank" rel="nofollow noopener noreferrer">JQuery</a>.</p>
<p>JQuery on kehitetty aikana, jolloin web-sivut olivat vielä suurimmaksi osaksi perinteisiä, eli palvelin muodosti HTML-sivuja, joiden toiminnallisuutta rikastettiin selaimessa JQueryllä kirjoitetun Javascript-koodin avulla. Yksi syy JQueryn suosion taustalla oli niin sanottu cross-browser yhteensopivuus, eli kirjasto toimi selaimesta ja selainvalmistajasta riippumatta samalla tavalla, eikä sitä käyttäessä ollut enää tarvetta kirjoittaa selainversiospesifisiä ratkaisuja. Nykyisin perus JQueryn käyttö ei ole enää yhtä perusteltua kuin aikaisemmin, sillä vanillaJS on kehittynyt paljon ja käytetyimmät selaimet tukevat yleisesti ottaen hyvin perustoiminnallisuuksia.</p>
<p>Single page app -tyylin noustua suosioon on ilmestynyt useita JQueryä &quot;modernimpia&quot; tapoja sovellusten kehittämiseen. Ensimmäisen aallon suosikki oli <a href="http://backbonejs.org/" target="_blank" rel="nofollow noopener noreferrer">BackboneJS</a>. Googlen kehittämä <a href="https://angularjs.org/" target="_blank" rel="nofollow noopener noreferrer">AngularJS</a> nousi 2012 tapahtuneen <a href="https://github.com/angular/angular.js/blob/master/CHANGELOG.md#100-temporal-domination-2012-06-13" target="_blank" rel="nofollow noopener noreferrer">julkaisun</a> jälkeen erittäin nopeasti lähes de facto -standardin asemaan modernissa web-sovelluskehityksessä.</p>
<p>Angularin suosio kuitenkin romahti siinä vaiheessa kun Angular-tiimi <a href="https://jaxenter.com/angular-2-0-announcement-backfires-112127.html" target="_blank" rel="nofollow noopener noreferrer">ilmoitti</a> lokakuussa 2014, että version 1 tuki lopetetaan ja Angular 2 ei tule olemaan taaksepäin yhteensopiva ykkösversion kanssa. Angular 2 ja uudemmat versiot eivät ole saaneet kovin innostunutta vastaanottoa.</p>
<p>Nykyisin suosituin tapa toteuttaa web-sovellusten selainpuolen logiikka on Facebookin kehittämä <a href="https://reactjs.org/" target="_blank" rel="nofollow noopener noreferrer">React</a>-kirjasto. Tulemme tutustumaan kurssin aikana Reactiin ja sen kanssa yleisesti käytettyyn <a href="https://github.com/reactjs/redux" target="_blank" rel="nofollow noopener noreferrer">Redux</a>-kirjastoon.</p>
<p>Reactin asema näyttää tällä hetkellä vahvalta, mutta Javascript-maailma ei lepää koskaan. Viime aikoina kiinnostusta on alkanut herättää mm. uudempi tulokas <a href="https://vuejs.org/" target="_blank" rel="nofollow noopener noreferrer">VueJS</a>.</p>
<h3>Full stack -websovelluskehitys</h3>
<p>Mitä tarkoitetaan kurssin nimellä <i>Full stack -websovelluskehitys</i>? Full stack on hypenomainen termi; kaikki puhuvat siitä, mutta kukaan ei oikein tiedä, mitä se tarkoittaa tai ainakaan mitään yhteneväistä määritelmää termille ei ole.</p>
<p>Käytännössä kaikki websovellukset sisältävät (ainakin) kaksi &quot;kerrosta&quot;, ylempänä, eli lähempänä loppukäyttäjää olevan selaimen ja alla olevan palvelimen. Palvelimen alapuolella on usein vielä tietokanta. Näin websovelluksen <i>arkkitehtuurin</i> voi ajatella muodostavan pinon, englanniksi <i>stack</i>.</p>
<p>Websovelluskehityksen yhteydessä puhutaan usein myös &quot;frontista&quot; (<a href="https://en.wikipedia.org/wiki/Front_and_back_ends" target="_blank" rel="nofollow noopener noreferrer">frontend</a>) ja &quot;backistä&quot; (<a href="https://en.wikipedia.org/wiki/Front_and_back_ends" target="_blank" rel="nofollow noopener noreferrer">backend</a>). Selain on frontend ja selaimessa suoritettava Javascript on frontend-koodia. Palvelimella taas pyörii backend-koodi.</p>
<p>Tämän kurssin kontekstissa full stack -sovelluskehitys tarkoittaa sitä, että fokus on kaikissa sovelluksen osissa, niin frontendissä kuin backendissä sekä taustalla olevassa tietokannassa. Myös palvelimen käyttöjärjestelmä ja sen ohjelmistot lasketaan usein osaksi stackia, niihin emme kuitenkaan tällä kurssilla puutu.</p>
<p>Ohjelmoimme myös palvelinpuolta, eli backendia Javascriptilla, käyttäen <a href="https://nodejs.org/en/" target="_blank" rel="nofollow noopener noreferrer">Node.js</a>-suoritusympäristöä. Näin full stack -sovelluskehitys saa vielä uuden ulottuvuuden, kun voimme käyttää samaa ohjelmointikieltä pinon useammassa kerroksessa. Full stack -sovelluskehitys ei välttämättä edellytä sitä, että kaikissa &quot;sovelluspinon&quot; kerroksissa on käytössä sama kieli (Javascript).</p>
<p>Aiemmin on ollut yleisempää, että sovelluskehittäjät ovat erikoistuneet tiettyyn sovelluksen osaan, esim. backendiin. Tekniikat backendissa ja frontendissa ovat saattaneet olla hyvin erilaisia. Full stack -trendin myötä on tullut tavanomaiseksi, että sovelluskehittäjä hallitsee riittävästi kaikkia sovelluksen tasoja ja tietokantaa. Usein full stack -kehittäjän on myös omattava riittävä määrä konfiguraatio- ja ylläpito-osaamista, jotta kehittäjä pystyy operoimaan sovellustaan esim. pilvipalveluissa.</p>
<h3>Javascript fatigue</h3>
<p>Full stack -sovelluskehitys on monella tapaa haastavaa. Asioita tapahtuu monessa paikassa ja mm. debuggaaminen on oleellisesti normaalia työpöytäsovellusta hankalampaa. Javascript ei toimi aina niin kuin sen olettaisi toimivan (verrattuna moniin muihin kieliin) ja sen suoritusympäristöjen asynkroninen toimintamalli aiheuttaa monenlaisia haasteita. Verkon yli tapahtuva kommunikointi edellyttää HTTP-protokollan tuntemusta. On tunnettava myös tietokantoja ja hallittava palvelinten konfigurointia ja ylläpitoa. Hyvä olisi myös hallita riittävästi CSS:ää, jotta sovellukset saataisiin edes siedettävän näköisiksi.</p>
<p>Oman haasteensa tuo vielä se, että Javascript-maailma etenee koko ajan todella kovaa vauhtia eteenpäin. Kirjastot, työkalut ja itse kielikin ovat jatkuvan kehityksen alla. Osa alkaa kyllästyä nopeaan kehitykseen ja sitä kuvaamaan on lanseerattu termi <a href="https://medium.com/@ericclemmons/javascript-fatigue-48d4011b6fc4" target="_blank" rel="nofollow noopener noreferrer">Javascript</a> <a href="https://auth0.com/blog/how-to-manage-javascript-fatigue/" target="_blank" rel="nofollow noopener noreferrer">fatigue</a> eli <a href="https://hackernoon.com/how-it-feels-to-learn-javascript-in-2016-d3a717dd577f" target="_blank" rel="nofollow noopener noreferrer">Javascript</a>-väsymys.</p>
<p>Javascript-väsymys tulee varmasti iskemään myös tällä kurssilla. Onneksi nykyään on olemassa muutamia tapoja loiventaa oppimiskäyrää, ja voimme aloittaa keskittymällä konfiguraation sijaan koodaamiseen. Konfiguraatioita ei voi välttää, mutta seuraavat viikot voimme edetä iloisin mielin vailla pahimpia konfiguraatiohelvettejä.</p>
</div></div>
<div class="banner spacing spacing--after tasks" style="background-color:#B2BBF0"><div class="container"><div class="course-content col-6 push-right-3" style="border-color:#B2BBF0"> 
  <h3>Tehtäviä</h3>
<p>Tehtävät palautetaan GitHubin kautta ja merkitsemällä tehdyt tehtävät <a href="https://studies.cs.helsinki.fi/courses/#fullstack2019" target="_blank" rel="nofollow noopener noreferrer">palautussovellukseen</a>.</p>
<p>Voit palauttaa kurssin kaikki tehtävät samaan repositorioon, tai käyttää useita repositorioita. Jos palautat eri osien tehtäviä samaan repositorioon, käytä järkevää hakemistojen nimentää.</p>
<p>Tehtävät palautetaan <strong>yksi osa kerrallaan</strong>. Kun olet palauttanut osan tehtävät, et voi enää palauttaa saman osan tekemättä jättämiäsi tehtäviä.</p>
  <h4>0.1: HTML</h4>
<p>Kertaa HTML:n perusteet lukemalla Mozillan tutoriaali <a href="https://developer.mozilla.org/en-US/docs/Learn/Getting_started_with_the_web/HTML_basics" target="_blank" rel="nofollow noopener noreferrer">HTML:stä</a>. </p>
<p><i>Tätä tehtävää ei palauteta githubiin, riittää että luet tutoriaalin.</i></p>
  <h4>0.2: CSS</h4>
<p>Kertaa CSS:n perusteet lukemalla Mozillan tutoriaali <a href="https://developer.mozilla.org/en-US/docs/Learn/Getting_started_with_the_web/CSS_basics" target="_blank" rel="nofollow noopener noreferrer">CSS:stä</a>.</p>
<p><i>Tätä tehtävää ei palauteta githubiin, riittää että luet tutoriaalin.</i></p>
  <h4>0.3: HTML:n lomakkeet</h4>
<p>Tutustu HTML:n lomakkeiden perusteisiin lukemalla Mozillan tutoriaali <a href="https://developer.mozilla.org/en-US/docs/Learn/HTML/Forms/Your_first_HTML_form" target="_blank" rel="nofollow noopener noreferrer">Your first form</a>.</p>
<p><i>Tätä tehtävää ei palauteta githubiin, riittää että luet tutoriaalin.</i></p>
  <h4>0.4: uusi muistiinpano</h4>
<p>Luvussa <a href="Javascriptia%20sis%C3%A4lt%C3%A4v%C3%A4n%20sivun%20lataaminen%20-%20kertaus">Javascriptia sisältävän sivun lataaminen - kertaus</a> kuvataan <a href="https://github.com/mluukkai/Ohjelmistotekniikka2018/blob/master/web/materiaali.md#sekvenssikaaviot" target="_blank" rel="nofollow noopener noreferrer">sekvenssikaavion</a> avulla sivun <a href="https://fullstack-exampleapp.herokuapp.com/notes" target="_blank" rel="nofollow noopener noreferrer">https://fullstack-exampleapp.herokuapp.com/notes</a> avaamisen aikaansaama tapahtumasarja.</p>
<p>Kaavio on luotu <a href="https://www.websequencediagrams.com" target="_blank" rel="nofollow noopener noreferrer">websequencediagrams</a>-palvelussa, seuraavasti:</p>
<pre><code>selain-&gt;palvelin: HTTP GET https://fullstack-exampleapp.herokuapp.com/notes
palvelin--&gt;selain: HTML-koodi
selain-&gt;palvelin: HTTP GET https://fullstack-exampleapp.herokuapp.com/main.css
palvelin--&gt;selain: main.css
selain-&gt;palvelin: HTTP GET https://fullstack-exampleapp.herokuapp.com/main.js
palvelin--&gt;selain: main.js

note over selain:
selain alkaa suorittaa js-koodia
joka pyytää JSON-datan palvelimelta
end note

selain-&gt;palvelin: HTTP GET https://fullstack-exampleapp.herokuapp.com/data.json
palvelin--&gt;selain: [{ content: &quot;HTML on helppoa&quot;, date: &quot;2019-01-01&quot; }, ...]

note over selain:
selain suorittaa tapahtumankäsittelijän
joka renderöi muistiinpanot näytölle
end note
</code></pre>
<p><strong>Tee vastaavanlainen kaavio</strong>, joka kuvaa mitä tapahtuu tilanteesta, missä käyttäjä luo uuden muistiinpanon ollessaan sivulla <a href="https://fullstack-exampleapp.herokuapp.com/notes" target="_blank" rel="nofollow noopener noreferrer">https://fullstack-exampleapp.herokuapp.com/notes</a>, eli kirjoittaa tekstikenttään jotain ja painaa nappia <i>tallenna</i>.</p>
<p>Kirjoita tarvittaessa palvelimella tai selaimessa tapahtuvat operaatiot sopivina kommentteina kaavion sekaan.</p>
<p>Kaavion ei ole pakko olla sekvenssikaavio. Mikä tahansa järkevä kuvaustapa käy.</p>
<p>Kaikki oleellinen tämän ja seuraavien kolmen tehtävän tekemiseen liittyvä informaatio on selitettynä <a href="../osa0">tämän osan</a> tekstissä. Näiden tehtävien ideana on, että luet tekstin vielä kerran ja mietit tarkkaan mitä missäkin tapahtuu. Ohjelman <a href="https://github.com/mluukkai/example_app" target="_blank" rel="nofollow noopener noreferrer">koodin</a> lukemista ei näissä tehtävissä edellytetä, vaikka sekin on toki mahdollista.</p>
  <h4>0.5: Single page app</h4>
<p>Tee kaavio tilanteesta, missä käyttäjä menee selaimella osoitteeseen <a href="https://fullstack-exampleapp.herokuapp.com/spa" target="_blank" rel="nofollow noopener noreferrer">https://fullstack-exampleapp.herokuapp.com/spa</a> eli muistiinpanojen <a href="../osa0/#single-page-app">single page app</a>-versioon</p>
  <h4>0.6: Uusi muistiinpano</h4>
<p>Tee kaavio tilanteesta, missä käyttäjä luo uuden muistiinpanon single page -versiossa.</p>
<p>Tämä oli osan viimeinen tehtävä ja on aika pushata vastaukset githubiin merkata tehdyt tehtävät <a href="https://studies.cs.helsinki.fi/courses/#fullstack2019" target="_blank" rel="nofollow noopener noreferrer">palautussovellukseen</a>.</p>
</div></div></div></div><div class="container spacing element--flex element--centered"><a class="edit-link" target="__BLANK" href="https://github.com/fullstack-hy2019/fullstack-hy2019.github.io/edit/source/src/content/osa0/osa0b.md">Ehdota muutosta materiaalin sisältöön</a></div><div class="container spacing spacing--after-large prev-next__container "><a class="col-4--mobile push-right-1 prev" href="/osa0/yleista"><div class=" element--flex element--column"><p>Osa <!-- -->0a</p><b>Edellinen osa</b></div></a><a class="col-4--mobile push-left-1 next" href="/osa1"><div class=" element--flex element--column"><p>Osa <!-- -->1</p><b>Seuraava osa</b></div></a></div></div><div class="container spacing--after element--flex" id="footer"><div class="col-5 col-10--mobile order-2--mobile footer__links element--flex element--space-between"><a href="https://www.helsinki.fi/" class="col-5 col-4--mobile spacing--mobile"><div class="image col-6 image--contain"><div class="image__container"><img style="background-color:;background-opacity:0.5" class="image__content" src="/static/hgin_yliopisto-30c68104749d830b6cef6ea8c6339b16.png" alt="Helsingin yliopiston logo"/></div></div></a><a href="https://www.houston-inc.com/" class="col-5 col-4--mobile spacing--mobile"><div class="image col-6 image--contain"><div class="image__container"><img style="background-color:;background-opacity:0.5" class="image__content" src="/static/houston_logo-356bd2a9a75b44bdf7897b2cdd387600.png" alt="Houston inc. logo"/></div></div></a></div><div class="col-5 col-5--mobile order-1--mobile footer__navigation element--flex"><a class="footer__navigation-link nav-item-hover col-10--mobile" style="margin-left:4.5rem" href="/about">KURSSISTA</a><a class="footer__navigation-link nav-item-hover col-10--mobile" style="margin-left:4.5rem" href="/#course-contents">KURSSIN SISÄLTÖ</a><a class="footer__navigation-link nav-item-hover col-10--mobile" style="margin-left:4.5rem" href="/faq">FAQ</a></div></div></div></div><script id="gatsby-script-loader">/*<![CDATA[*/window.page={"componentChunkName":"component---src-templates-content-template-js","jsonName":"osa-0-web-sovelluksen-toimintaperiaatteita-9eb","path":"/osa0/web_sovelluksen_toimintaperiaatteita"};window.dataPath="889/path---osa-0-web-sovelluksen-toimintaperiaatteita-9-eb-c59-98XfHlVElevGIkLAE9aYFNlvAA";/*]]>*/</script><script id="gatsby-chunk-mapping">/*<![CDATA[*/window.___chunkMapping={"app":["/app.f588656cc80a065e5f1e.css","/app-99428090e5bd22eeeca0.js"],"component---src-templates-part-intro-template-js":["/component---src-templates-part-intro-template-js.d6d3dd1b5d88eb2952b1.css","/component---src-templates-part-intro-template-js-0f2465b20eeade53be31.js"],"component---src-templates-content-template-js":["/component---src-templates-content-template-js.e0ea38572bef1d3250bd.css","/component---src-templates-content-template-js-4cf3ce554b069f839267.js"],"component---src-pages-404-js":["/component---src-pages-404-js.8d4a7977feb76fc76984.css","/component---src-pages-404-js-53d9e26ff2bab56a7f78.js"],"component---src-pages-about-js":["/component---src-pages-about-js.016d541d593372152c39.css","/component---src-pages-about-js-d0a7dbd5a578e6d228c0.js"],"component---src-pages-companies-js":["/component---src-pages-companies-js.8d4a7977feb76fc76984.css","/component---src-pages-companies-js-e1d71629075b53dc1e2e.js"],"component---src-pages-faq-js":["/component---src-pages-faq-js.79b882b76cf01573a4f7.css","/component---src-pages-faq-js-ba9e688108763d0ce821.js"],"component---src-pages-index-js":["/component---src-pages-index-js.8376cb274ee702a24c1b.css","/component---src-pages-index-js-15d63338424ac9141c7d.js"]};/*]]>*/</script><script src="/webpack-runtime-8c10bc8001a0e578ec33.js" async=""></script><script src="/3-7bca983c2bafa9f6e675.js" async=""></script><script src="/0-60547c03d4cc4251e376.js" async=""></script><script src="/2-e0028e5792f6cb5e6fe8.js" async=""></script><script src="/component---src-templates-content-template-js-4cf3ce554b069f839267.js" async=""></script><script src="/1-456d0b929a90ce0c027e.js" async=""></script><script src="/app-99428090e5bd22eeeca0.js" async=""></script></body></html>